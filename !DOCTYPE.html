<!DOCTYPE html>
<html>
<head>
<title>Funny Meme Runner FINAL ðŸ˜‚ (Shake BG)</title>
<style>
body{margin:0;overflow:hidden;background:black;}
canvas{display:block;margin:auto;}

#ui{
 position:absolute;
 top:10px;left:10px;
 color:white;
 font-family:Arial;
 font-size:18px;
 z-index:5;
}

/* GAME OVER OUTRO */
#outro{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,0.95);
 display:none;
 flex-direction:column;
 align-items:center;
 justify-content:center;
 color:white;
 font-family:Arial;
 text-align:center;
 z-index:20;
}

#outro h1{font-size:38px;}
#outro p{font-size:20px;margin:10px;}

#restartBtn{
 display:none;
 padding:12px 30px;
 font-size:18px;
 cursor:pointer;
 margin-top:20px;
}

/* LEVEL COMPLETE POPUP */
#levelComplete{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,0.9);
 display:none;
 flex-direction:column;
 align-items:center;
 justify-content:center;
 color:white;
 font-family:Arial;
 text-align:center;
 z-index:25;
}

#levelComplete h1{font-size:36px;}
#levelComplete button{
 padding:12px 30px;
 font-size:18px;
 margin:10px;
 cursor:pointer;
}
</style>
</head>
<body>

<div id="ui">Level: 1 | Score: 0</div>

<div id="outro">
  <h1>GAME OVER ðŸ˜‚</h1>
  <p>Tere bas ki nahi hai ðŸ˜­ðŸ”¥</p>
  <p>Thoda rukâ€¦ phir restart milega ðŸ’€</p>
  <button id="restartBtn" onclick="location.reload()">RESTART</button>
</div>

<div id="levelComplete">
  <h1>LEVEL COMPLETE ðŸŽ‰</h1>
  <p>Kya karega ab?</p>
  <button onclick="replayLevel()">Replay This Level</button>
  <button onclick="nextLevel()">Next Level</button>
</div>

<canvas id="game" width="900" height="450"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* BACKGROUNDS */
let bgImgs = ["a.jpg","b.jpg","c.webp","d.webp","e.webp"];
let bg = new Image();
bg.src = bgImgs[0];

/* SHAKE SYSTEM */
let shakePower = 0;
let shakeDecay = 0.9;
let shakeX = 0;
let shakeY = 0;

/* LEVEL DATA */
let levels = [
 {score:0,   speed:4, spawn:1200},
 {score:500, speed:6, spawn:1000},
 {score:1200,speed:8, spawn:850},
 {score:2200,speed:10,spawn:700},
 {score:3500,speed:13,spawn:550}
];

let level = 0;
let score = 0;
let gameOver = false;
let levelPaused = false;

let gravity = 0.5;
let ground = 330;

/* Sounds */
let jumpSound = new Audio("audio.mp3");

let deathSound = document.createElement("video");
deathSound.src = "Chud_Gayi_Chud_Gayi_Meme_128KBPS.mp4";
deathSound.volume = 1;
deathSound.addEventListener("timeupdate", ()=>{
  if(deathSound.currentTime >= 10){
    deathSound.pause();
  }
});

/* Images */
let playerImg = new Image();
playerImg.src = "player.png";

let obsImg = new Image();
obsImg.src = "hakla.jpg";

/* Player */
let player = {
 x:120, y:ground, w:40, h:55,
 vy:0, rotation:0, alive:true
};

let obstacles = [];
let spawnInterval;

/* SPAWN */
function startSpawn(){
 clearInterval(spawnInterval);
 spawnInterval = setInterval(spawnObstacle, levels[level].spawn);
}

function spawnObstacle(){
 let size = 35 + Math.random()*25;
 obstacles.push({
   x: canvas.width,
   y: ground - size,
   size: size,
   speed: levels[level].speed + Math.random()*2
 });
}

/* CONTROLS */
// PC
document.addEventListener("keydown", e=>{
 if(e.key===" " && player.y>=ground && player.alive && !levelPaused){
   jump();
 }
});
// Mobile
canvas.addEventListener("touchstart", ()=>{
 if(player.y>=ground && player.alive && !levelPaused){
   jump();
 }
});

function jump(){
 player.vy = -12;
 jumpSound.currentTime = 0;
 jumpSound.play();
 shakePower = 8;   // jump par shake
}

/* LEVEL COMPLETE */
function showLevelComplete(){
 levelPaused = true;
 document.getElementById("levelComplete").style.display="flex";
 clearInterval(spawnInterval);
}

function replayLevel(){
 obstacles=[];
 score = levels[level].score;
 document.getElementById("levelComplete").style.display="none";
 levelPaused = false;
 startSpawn();
}

function nextLevel(){
 if(level < levels.length-1){
   level++;
   bg.src = bgImgs[level];
 }
 obstacles=[];
 score = levels[level].score;
 document.getElementById("levelComplete").style.display="none";
 levelPaused = false;
 startSpawn();
}

/* UPDATE */
function update(){
 if(gameOver || levelPaused) return;

 player.vy += gravity;
 player.y += player.vy;
 if(player.y > ground){ player.y=ground; player.vy=0; }

 obstacles.forEach(o=>o.x-=o.speed);
 obstacles = obstacles.filter(o=>o.x+o.size>0);

 for(let o of obstacles){
  if(player.x < o.x + o.size &&
     player.x + player.w > o.x &&
     player.y < o.y + o.size &&
     player.y + player.h > o.y){

    player.alive=false;
    gameOver=true;
    player.vy=-10;

    document.getElementById("outro").style.display="flex";

    deathSound.currentTime=1.5;
    deathSound.play();

    setInterval(()=>player.rotation+=0.25,30);

    shakePower = 20; // death par heavy shake

    setTimeout(()=>{
      document.getElementById("restartBtn").style.display="block";
    },4000);
  }
 }

 score++;

 // LEVEL COMPLETE
 if(level < levels.length-1 && score >= levels[level+1].score){
   showLevelComplete();
 }

 document.getElementById("ui").innerText =
   "Level: " + (level+1) + " | Score: " + score;
}

/* DRAW */
function draw(){
 // Shake calculation
 shakeX = (Math.random()-0.5) * shakePower;
 shakeY = (Math.random()-0.5) * shakePower;
 shakePower *= shakeDecay;
 if(shakePower < 0.5) shakePower = 0;

 ctx.save();
 ctx.translate(shakeX, shakeY);

 // Background
 ctx.drawImage(bg,0,0,canvas.width,canvas.height);

 // Ground
 ctx.fillStyle="#2e7d32";
 ctx.fillRect(0,ground+40,canvas.width,100);

 // Player
 ctx.save();
 ctx.translate(player.x+player.w/2,player.y+player.h/2);
 ctx.rotate(player.rotation);
 ctx.drawImage(playerImg,-player.w/2,-player.h/2,player.w,player.h);
 ctx.restore();

 // Obstacles
 obstacles.forEach(o=>{
  ctx.drawImage(obsImg,o.x,o.y,o.size,o.size);
 });

 ctx.restore();
}

/* LOOP */
function loop(){
 update();
 draw();
 requestAnimationFrame(loop);
}

startSpawn();
loop();
</script>

</body>
</html>


